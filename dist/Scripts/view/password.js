!function(e){e(["jquery","api","translate","utils"],function(e,s,n,t){function l(){e("#txtPwdOld").keypress(function(){e("#lblPwdError").html("").css("color","red")}),e("#txtPwdNew").keypress(function(){e("#lblPwdError").html("").css("color","red")}),e("#txtPwdConfirm").keypress(function(){e("#lblPwdError").html("").css("color","red")})}function i(){s.POST("/api/changeQuestions","",r,a)}function r(s,t,l){var i=e.parseJSON(s);e("#depositTitle").css("display","none"),e("#questionTitle").css("display","table-cell"),e("#tblDepositInner").css("display","none"),e("#tblDepositBoard").css("display","none"),e("#tblDespositPending").css("display","none"),e("#tblSetQuestion").css("display","table"),e("#sel_preset_1").find("option").remove(),e.each(i[1],function(s,n){e("#sel_preset_1").append('<option class="translate" value="'+s+'">'+n+"</option>")}),e("#sel_preset_2").find("option").remove(),e.each(i[2],function(s,n){e("#sel_preset_2").append('<option class="translate" value="'+s+'">'+n+"</option>")}),e.each(i[3],function(s,n){"0"==n?e("#chkDisableQuestion").prop("checked",!0):e("#chkDisableQuestion").prop("checked",!1),e("#chkDisableQuestion").trigger("change")}),e("#tbl_preset").css("display","table"),n()}function a(e,s){}function o(){v.Reset();var n=v.Compare("#txt_preset_answer_1","#txt_preset_answer_2","#answer2_false");if(n=v.Question("#txt_preset_answer_2","#answer2_false")&&n,n=v.Question("#txt_preset_answer_1","#answer1_false")&&n){var t=new Object;t.question1=e("#sel_preset_1").val(),t.answer1=e.trim(e("#txt_preset_answer_1").val()),t.question2=e("#sel_preset_2").val(),t.answer2=e.trim(e("#txt_preset_answer_2").val());var l=JSON.stringify(t);s.POST("/api/setQuestions",l,c,d)}}function c(e,s,l){t.SetCookie("deviceId",e,30),(new n).warning("Security questions has been updated","",null,h)}function d(e,s){v.Reset(),"3001"==e?v.Invalid("#answer1_false"):"3002"==e?v.Invalid("#answer2_false"):console.log(e+":"+s),n()}function p(){s.POST("/api/disableQuestion","",u,w)}function u(e,s,l){t.RemoveCookie("deviceId","/"),(new n).warning("Security questions has been updated","",null,h)}function w(e,s){v.Reset()}function _(){var t=new Object;t.old=e.trim(e("#txtPwdOld").val()),t["new"]=e.trim(e("#txtPwdNew").val());var l=e.trim(e("#txtPwdConfirm").val());""==t["new"]||""==t.old||""==l?(new n).warning("Please fill in all empty fields",null,null,m):t["new"]==t.old?(new n).warning("New password cannot be the same as old password",null,null,m):t["new"]<6||t.old<6?(new n).warning("Password must be least 6 characters",null,null,m):t["new"]!=l?(new n).warning("Confirm password is not the same as new password",null,null,m):s.POST("/api/setPassword",JSON.stringify(t),b,f)}function b(s,t,l){e("#txtPwdOld").val(""),e("#txtPwdNew").val(""),e("#txtPwdConfirm").val(""),"1"!=s?e("#lblPwdError").css("color","red").html(l):(new n).warning("Password has been changed","",null,h)}function f(e,s){(new n).warning(s,e,null,m)}function h(e,s){alert(s)}function m(s,n){e("#errorBox").html(n).css("display","block")}var v={Reset:function(){e("#answer1_true").hide(),e("#answer1_false").hide(),e("#answer2_true").hide(),e("#answer2_false").hide()},Invalid:function(s){e(s).css("display","block")},Error:function(s){e("#errorBox").html(s).show(),n()},Question:function(s,n){var t=e(s).val();return e.trim(t).length<3||e.trim(t).length>16?(this.Invalid(n),this.Error("Answer must be between 3 to 16 characters"),!1):!0},Compare:function(s,n,t){var l=e(s).val(),i=e(n).val();return e.trim(l)==e.trim(i)?(console.log(l+":"+i),this.Invalid(t),this.Error("Answer 1 and answer 2 cannot be same"),!1):!0}};return function(){e("#lblPwdUname").html(localStorage.getItem("username")),e("#btnPwdSubmit").click(_),e("#btnSet").click(function(){console.log(e("#chkDisableQuestion").prop("checked")),e("#chkDisableQuestion").prop("checked")?p():o()}),e("#pwdMenuPass").click(function(){e("#passwordTitle").css("display","table-cell"),e("#questionTitle").css("display","none"),e("#tblPasswordInner").css("display","table"),e("#tblSetQuestion").css("display","none")}),e("#pwdMenuQuestion").click(function(){e("#passwordTitle").css("display","none"),e("#questionTitle").css("display","table-cell"),e("#tblPasswordInner").css("display","none"),e("#tblSetQuestion").css("display","table"),i()}),e("#chkDisableQuestion").change(function(){this.checked?(e("#sel_preset_1").prop("disabled",!0),e("#sel_preset_2").prop("disabled",!0),e("#txt_preset_answer_1").prop("disabled",!0),e("#txt_preset_answer_2").prop("disabled",!0)):(e("#sel_preset_1").prop("disabled",!1),e("#sel_preset_2").prop("disabled",!1),e("#txt_preset_answer_1").prop("disabled",!1),e("#txt_preset_answer_2").prop("disabled",!1))}),l()}})}(myGlobalRequire.define);