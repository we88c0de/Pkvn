!function(e){e(["jquery","api","translate","utils"],function(e,n,s,t){function l(){e("#txtPwdOld").keypress(function(){e("#lblPwdError").html("").css("color","red")}),e("#txtPwdNew").keypress(function(){e("#lblPwdError").html("").css("color","red")}),e("#txtPwdConfirm").keypress(function(){e("#lblPwdError").html("").css("color","red")})}function a(){n.POST("/api/changeQuestions","",r,i)}function r(n,t,l){var a=e.parseJSON(n);e("#depositTitle").css("display","none"),e("#questionTitle").css("display","table-cell"),e("#tblDepositInner").css("display","none"),e("#tblDepositBoard").css("display","none"),e("#tblDespositPending").css("display","none"),e("#tblSetQuestion").css("display","table"),e.each(a[1],function(n,s){e("#sel_preset_1").append('<option class="translate" value="'+n+'">'+s+"</option>")}),e.each(a[2],function(n,s){e("#sel_preset_2").append('<option class="translate" value="'+n+'">'+s+"</option>")}),e("#tbl_preset").css("display","table"),s()}function i(e,n){}function o(){_.Reset();var s=_.Compare("#txt_preset_answer_1","#txt_preset_answer_2","#answer2_false");if(s=_.Question("#txt_preset_answer_2","#answer2_false")&&s,s=_.Question("#txt_preset_answer_1","#answer1_false")&&s){var t=new Object;t.question1=e("#sel_preset_1").val(),t.answer1=e.trim(e("#txt_preset_answer_1").val()),t.question2=e("#sel_preset_2").val(),t.answer2=e.trim(e("#txt_preset_answer_2").val());var l=JSON.stringify(t);n.POST("/api/setQuestions",l,c,d)}}function c(e,n,l){t.SetCookie("deviceId",e,30),(new s).warning("Security questions has been changed","",null,f)}function d(e,n){_.Reset(),"3001"==e?_.Invalid("#answer1_false"):"3002"==e?_.Invalid("#answer2_false"):console.log(e+":"+n),s()}function w(){var t=new Object;t.old=e.trim(e("#txtPwdOld").val()),t["new"]=e.trim(e("#txtPwdNew").val());var l=e.trim(e("#txtPwdConfirm").val());""==t["new"]||""==t.old||""==l?(new s).warning("Please fill in all empty fields",null,null,b):t["new"]==t.old?(new s).warning("New password cannot be the same as old password",null,null,b):t["new"]<6||t.old<6?(new s).warning("Password must be least 6 characters",null,null,b):t["new"]!=l?(new s).warning("Confirm password is not the same as new password",null,null,b):n.POST("/api/setPassword",JSON.stringify(t),u,p)}function u(n,t,l){e("#txtPwdOld").val(""),e("#txtPwdNew").val(""),e("#txtPwdConfirm").val(""),"1"!=n?e("#lblPwdError").css("color","red").html(l):(new s).warning("Password has been changed","",null,f)}function p(e,n){(new s).warning(n,e,null,b)}function f(e,n){alert(n)}function b(n,s){e("#errorBox").html(s).css("display","block")}var _={Reset:function(){e("#answer1_true").hide(),e("#answer1_false").hide(),e("#answer2_true").hide(),e("#answer2_false").hide()},Invalid:function(n){e(n).css("display","block")},Error:function(n){e("#errorBox").html(n).show(),s()},Question:function(n,s){var t=e(n).val();return e.trim(t).length<3||e.trim(t).length>16?(this.Invalid(s),this.Error("Answer must be between 3 to 16 characters"),!1):!0},Compare:function(n,s,t){var l=e(n).val(),a=e(s).val();return e.trim(l)==e.trim(a)?(console.log(l+":"+a),this.Invalid(t),this.Error("Answer 1 and answer 2 cannot be same"),!1):!0}};return function(){e("#lblPwdUname").html(localStorage.getItem("username")),e("#btnPwdSubmit").click(w),e("#btnSet").click(o),e("#pwdMenuPass").click(function(){e("#passwordTitle").css("display","table-cell"),e("#questionTitle").css("display","none"),e("#tblPasswordInner").css("display","table"),e("#tblSetQuestion").css("display","none")}),e("#pwdMenuQuestion").click(function(){e("#passwordTitle").css("display","none"),e("#questionTitle").css("display","table-cell"),e("#tblPasswordInner").css("display","none"),e("#tblSetQuestion").css("display","table"),a()}),l()}})}(myGlobalRequire.define);