!function(n){n(["jquery","translate","utils","aes-handler","rsa-handler"],function(n,e,r,t,o){return function(r){function a(){var r=n.trim(n(".SITELOGIN[method=username]").val()),t=n.trim(n(".SITELOGIN[method=password]").val());0==r.length?(new e).warning("Username cannot be empty","",null,s):0==t.length?(new e).warning("Password cannot be empty","",null,s):r.length>16?(new e).warning("Username cannot be more than 16 characters","",null,s):t.length>16?(new e).warning("Password cannot be more than 16 characters","",null,s):i(r,t)}function i(n,r){try{localStorage.setItem("username",n);var o=new Object;o.username=n,o.password=r,o.key=t.key();var a=JSON.stringify(o),i=f.Encrypt(a),c=document.referrer,s=p("ref");u("login",{enc:encodeURIComponent(i),urlRef:c,ref:s,type:"json"},"json",l,null)}catch(d){alert(d),(new e).warning("Connection error","",null,w)}}function l(r){try{var o=t.Decrypt(r.enc,r.iv)}catch(a){var i=r.errcode,l=r.errtext,u=r.result;return"0"!=i&&d(i,l,u),0}var p=n.parseJSON(o),i=p.errcode,l=p.errtext,u=p.result;switch(i){case"0":c("/core/view/main.aspx"+window.location.search);break;case"1005":c("/core/SecurityQuestion.aspx"+window.top.location.search);break;case"1002":(new e).warning(l,i,null,s);break;case"1004":(new e).warning(l,i,null,s);break;default:(new e).warning(l,i,null,w)}}function c(n){y?window.top.location=n:null!=window.opener?(window.opener.loginSuccess(t.key(),n),window.top.location="/app/Thankyou.html?action=close"):window.top.location="/app/Thankyou.html?action="+n}function u(r,t,o,a,i){n.ajax({type:"POST",url:"/api/"+r,dataType:o,data:t,timeout:2e4,beforeSend:function(e){n("#login_loading").css("display","inline-block")},complete:function(){n("#login_loading").css("display","none")},success:function(n){a(n)},error:function(n,r,t){"timeout"===r?(new e).warning("Connection time out","",null,s):"abort"===r?(new e).warning("Connection abort","",null,s):"parsererror"===r?(new e).warning("Session Expired: ParserError","",null,w):"error"===r&&("440"==n.status?(new e).warning("Session Expired: 440","",null,w):0==t.length?(new e).warning("Connection error","",null,s):(new e).warning("ERR: "+t,"",null,w))}})}function s(n,e){alert(e)}function w(n,e){alert(e),location.reload()}function d(n,e,r){alert(n+": "+e+"\n"+r),location.reload()}function p(n){return decodeURIComponent((new RegExp("[?|&]"+n+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||""}var f=new o;f.Init(r);var g=n(".SITELOGIN[method=username]"),m=n(".SITELOGIN[method=password]"),h=n(".SITELOGIN[method=login]");g.attr("tabindex","1").keydown(function(n){13==n.keyCode&&(n.preventDefault(),a())}),m.attr("tabindex","2").keydown(function(n){13==n.keyCode&&(n.preventDefault(),a())}),h.attr("tabindex","3").click(function(){a()}).closest("form").submit(function(n){n.preventDefault()});var y=!0;this.ForceLogin=function(n,e){y=!1,i(n,e)}}})}(myGlobalRequire.define);